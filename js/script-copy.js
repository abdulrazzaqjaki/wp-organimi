var wp_og_packages = {

    1:{
        standard : {
            annual : {
                per_year : 120,
                per_month : 10,
            },
            monthly : {
                per_month : 18,
                per_year : 210,
            },
            per_emp_year: 1.40,
            admin : 3,
            employee: 150,
        },
        premium : {
            annual : {
                per_year : 240,
                per_month : 20,
            },
            monthly : {
                per_month : 35,
                per_year : 420,
            },
            per_emp_year: 2.80,
            admin : 'unlimited',
            employee: 150,
        },
    },
    2:{
        standard : {
            annual : {
                per_year : 195,
                per_month : 16,
            },
            monthly : {
                per_month : 28,
                per_year : 341,
            },
            per_emp_year: 1.37,
            admin : 3,
            employee: 250,
        },
        premium : {
            annual : {
                per_year : 390,
                per_month : 33,
            },
            monthly : {
                per_month : 57,
                per_year : 683,
            },
            per_emp_year: 2.73,
            admin : 'unlimited',
            employee: 250,

        },
    },
    3:{
        standard : {
            annual : {
                per_year : 380,
                per_month : 32,
            },
            monthly : {
                per_month : 55,
                per_year : 665,
            },
            per_emp_year: 1.33,
            admin : 5,
            employee: 500,
        },
        premium : {
            annual : {
                per_year : 760,
                per_month : 63,
            },
            monthly : {
                per_month : 111,
                per_year : 1330,
            },
            per_emp_year: 2.66,
            admin : 'unlimited',
            employee: 500,
        },
    },
    4:{
        standard : {
            annual : {
                per_year : 555,
                per_month : 46,
            },
            monthly : {
                per_month : 81,
                per_year : 971,
            },
            per_emp_year: 1.30,
            admin : 5,
            employee: 750,
        },
        premium : {
            annual : {
                per_year : 240,
                per_month : 20,
            },
            monthly : {
                per_month : 35,
                per_year : 420,
            },
            per_emp_year: 2.80,
            admin : 'unlimited',
            employee: 750,
        },
    },
    5:{
        standard : {
            annual : {
                per_year : 720,
                per_month : 60,
            },
            monthly : {
                per_month : 105,
                per_year : 1260,
            },
            per_emp_year: 1.26,
            admin : 10,
            employee: 1000,
        },
        premium : {
            annual : {
                per_year : 1440,
                per_month : 1220,
            },
            monthly : {
                per_month : 210,
                per_year : 2520,
            },
            per_emp_year: 2.52,
            admin : 'unlimited',
            employee: 1000,
        },
    },
    6:{
        standard : {
            annual : {
                per_year : 900,
                per_month : 75,
            },
            monthly : {
                per_month : 131,
                per_year : 1575,
            },
            per_emp_year: 1.26,
            admin : 10,
            employee: 1250,
        },
        premium : {
            annual : {
                per_year : 1800,
                per_month : 150,
            },
            monthly : {
                per_month : 263,
                per_year : 3150,
            },
            per_emp_year: 2.52,
            admin : 'unlimited',
            employee: 1250,
        },
    },
    7:{
        standard : {
            annual : {
                per_year : 1050,
                per_month : 88,
            },
            monthly : {
                per_month : 153,
                per_year : 1838,
            },
            per_emp_year: 1.23,
            admin : 10,
            employee: 1500,
        },
        premium : {
            annual : {
                per_year : 2100,
                per_month : 175,
            },
            monthly : {
                per_month : 306,
                per_year : 3675,
            },
            per_emp_year: 2.45,
            admin : 'unlimited',
            employee: 1500,
        },
    },
    8:{
        standard : {
            annual : {
                per_year : 1225,
                per_month : 102,
            },
            monthly : {
                per_month : 179,
                per_year : 2144,
            },
            per_emp_year: 1.23,
            admin : 10,
            employee: 1750,
        },
        premium : {
            annual : {
                per_year : 2450,
                per_month : 204,
            },
            monthly : {
                per_month : 357,
                per_year : 4288,
            },
            per_emp_year: 2.45,
            admin : 'unlimited',
            employee: 1750,
        },
    },
    9:{
        standard : {
            annual : {
                per_year : 1360,
                per_month : 113,
            },
            monthly : {
                per_month : 198,
                per_year : 2380,
            },
            per_emp_year: 1.19,
            admin : 15,
            employee: 2000,
        },
        premium : {
            annual : {
                per_year : 2720,
                per_month : 227,
            },
            monthly : {
                per_month : 397,
                per_year : 4760,
            },
            per_emp_year: 2.38,
            admin : 'unlimited',
            employee: 2000,
        },
    },
    10:{
        standard : {
            annual : {
                per_year : 1530,
                per_month : 128,
            },
            monthly : {
                per_month : 223,
                per_year : 2678,
            },
            per_emp_year: 1.19,
            admin : 15,
            employee: 2250,
        },
        premium : {
            annual : {
                per_year : 3060,
                per_month : 255,
            },
            monthly : {
                per_month : 446,
                per_year : 5355,
            },
            per_emp_year: 2.38,
            admin : 'unlimited',
            employee: 2250,
        },
    },
    11:{
        standard : {
            annual : {
                per_year : 1650,
                per_month : 138,
            },
            monthly : {
                per_month : 241,
                per_year : 2888,
            },
            per_emp_year: 1.16,
            admin : 15,
            employee: 2500,
        },
        premium : {
            annual : {
                per_year : 3300,
                per_month : 275,
            },
            monthly : {
                per_month : 481,
                per_year : 5775,
            },
            per_emp_year: 2.31,
            admin : 'unlimited',
            employee: 2500,
        },
    },
    12:3000,
    13:3500,
    14:4000,
    15:4500,
    16:5000,
    17:6000,
    18:7000,
    19:8000,
    20:9000,
    21:10000,

}

var org_slider_container =  jQuery('.org_slider_container');


class Slider {
    constructor (rangeElement, valueElement, options) {
        this.rangeElement = rangeElement
        this.valueElement = valueElement
        this.options = options

        // Attach a listener to "change" event
        this.rangeElement.addEventListener('input', this.updateSlider.bind(this))
    }

    // Initialize the slider
    init() {
        this.rangeElement.setAttribute('min', options.min)
        this.rangeElement.setAttribute('max', options.max)
        this.rangeElement.value = options.cur

        this.updateSlider()
    }

    // Format the money
    asMoney(value) {
        return parseFloat(value)
            .toLocaleString('en-US', { maximumFractionDigits: 2 })
    }

    generateBackground(rangeElement) {
        if (this.rangeElement.value === this.options.min) {
            return
        }

        let percentage =  (this.rangeElement.value - this.options.min) / (this.options.max - this.options.min) * 100
        return 'background: linear-gradient(to right, #50299c, #7a00ff ' + percentage + '%, #d3edff ' + percentage + '%, #dee1e2 100%)'
    }

    get_price_html(first, str, str1){
        first = this.asMoney(first);

        let html = `<span class="plan-price">$`+first+`</span><small>/per `+str+` - paid `+str1+`</small>`;
        return html;
    }

    updateSlider (newValue) {


        let this_value = this.rangeElement.value;

        let show_value = 0;

        if(this_value <= 11){
            show_value = wp_og_packages[this_value]['standard']['employee'];
        }else{
            show_value = wp_og_packages[this_value];
        }





        this.valueElement.innerHTML = this.asMoney(show_value)
        this.rangeElement.style = this.generateBackground(this.rangeElement.value)

        let $ = jQuery;

        let og_basic = $('.org_package_container .og_basic');
        let og_premium = $('.org_package_container .og_premium');
        let og_basic_type_inp = org_slider_container.find('.switch input');
        let og_premium_type_inp = og_basic_type_inp;
        let og_basic_price = og_basic.find('.plan-cost');
        let og_premium_price = og_premium.find('.plan-cost');
        let og_basic_type = og_basic_type_inp.prop('checked');
        let og_premium_type = og_premium_type_inp.prop('checked');
        let og_10_message = "Contact us for quote";

        if(this_value <= 11){

            let current_obj = wp_og_packages[this_value];
            let premium_pkg = current_obj.premium;
            let basic_pkg = current_obj.standard;
            let basic_package = og_basic_type ? basic_pkg.annual : basic_pkg.monthly;
            let premium_package = og_premium_type ? premium_pkg.annual : premium_pkg.monthly;
            let basic_str = og_basic_type ? 'month' : 'year';
            let premium_str = og_premium_type ? 'month' : 'year';

            let basic_first = og_basic_type ? basic_package.per_year : basic_package.per_month;
            let basic_second = og_basic_type ? basic_package.per_month : basic_package.per_year;

            let premium_first = og_premium_type ? premium_package.per_year : premium_package.per_month;
            let premium_second = og_premium_type ? premium_package.per_month : premium_package.per_year;

            let str1 = 'month';
            let str2 = og_basic_type ? 'annually' : 'monthly';

            basic_first = og_basic_type ? basic_first : basic_second;
            premium_first = og_basic_type ? premium_first : premium_second;

            og_basic_price.removeClass('og_contact').html(this.get_price_html(basic_first, str1, str2));
            og_premium_price.removeClass('og_contact').html(this.get_price_html(premium_first, str1, str2));


        }else{
            og_basic_price.addClass('og_contact').html(og_10_message)
            og_premium_price.addClass('og_contact').html(og_10_message)
        }


    }
}

let rangeElement = document.querySelector('.range [type="range"]')
let valueElement = document.querySelector('.range .range__value span')

let options = {
    min: 1,
    max: 21,
    cur: 1
}

if (rangeElement) {
    var og_slider = new Slider(rangeElement, valueElement, options)
    og_slider.init()
}




jQuery(document).ready(function($){

    let org_package_conatiner =  $('.org_package_container');
    if(org_package_conatiner.lenght == 0){return;}

    let package_type_input = org_slider_container.find('.plan-type input');

        package_type_input.on('change', function(){

        og_slider.updateSlider('a');
        let this_parent = $(this).parents('.plan-type:first');
        let this_checked = $(this).prop('checked');
        var element = '';
        var oth = '';
        if(this_checked){
            element = this_parent.find('.annualy');
            oth = this_parent.find('.monthly');
        }else{
            element = this_parent.find('.monthly');
            oth = this_parent.find('.annualy');
        }


        if(element.length > 0){
            element.addClass('plan_active');
        }

        if(oth.length > 0){
            oth.removeClass('plan_active');
        }


    });



});


